# You Don't Know JS: Async & Performance
## 第二章 Callbacks
在第一章，我们了解了 javaScript 的异步语法，和 javaScript 的单线程事件流 event loop。我们还体验了在 javaScript 中的各种各样的并发问题，以及解决方式。

第一章中，我们普遍采用函数作为基本单元，每个函数就时每个功能，用函数去完成需求，其实函数能做的远远不止于此。

在本章中，函数又叫做 callback，不管是简单的还是复杂的 javaScrpit 代码，多多少少会有异步编程，而 callback
 作为异步编程不可或缺的基本单元，被普遍使用。

 callback 也有缺点，很多开发者希望使用 Promise 来编写异步编程的代码，以获得更好的体验。
 但是使用前最好充分理解什么是 Promise 以及它的工作模式。

 在本章中，我们会深入讨论这点，讨论为什么需要诸如 Promise 之类的新异步 API ，
 以及它们的优缺点。
 ## Continuations
 来一起看以下第一章中的简单栗子：
 ``` javaScript
 // A
ajax( "..", function(..){
	// C
} );
// B
 ```
 // A 以及 // B 处的代码优先执行，// C 处的代码作为 ajax 异步请求的 callbak 会在浏览器收到服务器回应后再执行。因为 callback 延迟执行的关系，其实也可以说 callback 延续了程序的执行。

 再看个简单的栗子：
 ``` javaScript
 // A
setTimeout( function(){
	// C
}, 1000 );
// B
 ```
 好了，思维在此停顿，请你用你自己的话描述上述代码的运行方式，大声说出来~ （这是原作者的要求，说是会加深你对他后面将要说的事情的理解）。

 很多读者估计是这样说的，“执行 A ，使用定时器定时 1000 毫秒，1000 毫秒后触发 C”。

 你看到上面的说法后可能会自我修正下说：“执行 A，设置一个定时器，定时 1000 毫秒，执行 B，等 1000 毫秒过后，执行C”。这里的话都是作者猜的 :)

 上面这两句话有什么不同呢？尽管第二句话可能更准确。

 其实上面两句话有个共同的不足是，这都是我们脑袋里想象出来的运行方式，它符合我们人类思考的逻辑。但是对于 JS 引擎来说，它的思考方式与我们不同，它更能理解与管理 callback 异步编程。
 
 正是因为有区别，是们不理解机器的运行方式，只用自己的方式思考，那么在以后代码的编写与维护中就会遇到问题。

 ## Sequential Brain
