# You Don't Know JS: Async & Performance
## 第二章 Callbacks
在第一章，我们了解了 javaScript 的异步语法，和 javaScript 的单线程事件流 event loop。我们还体验了在 javaScript 中的各种各样的并发问题，以及解决方式。

第一章中，我们普遍采用函数作为基本单元，每个函数就时每个功能，用函数去完成需求，其实函数能做的远远不止于此。

在本章中，函数又叫做 callback，不管是简单的还是复杂的 javaScrpit 代码，多多少少会有异步编程，而 callback
 作为异步编程不可或缺的基本单元，被普遍使用。

 callback 也有缺点，很多开发者希望使用 Promise 来编写异步编程的代码，以获得更好的体验。
 但是使用前最好充分理解什么是 Promise 以及它的工作模式。

 在本章中，我们会深入讨论这点，讨论为什么需要诸如 Promise 之类的新异步 API ，
 以及它们的优缺点。
 ## Continuations
 来一起看以下第一章中的简单栗子：
 ``` javaScript
 // A
ajax( "..", function(..){
	// C
} );
// B
 ```
 // A 以及 // B 处的代码优先执行，// C 处的代码作为 ajax 异步请求的 callbak 会在浏览器收到服务器回应后再执行。因为 callback 延迟执行的关系，其实也可以说 callback 延续了程序的执行。

 再看个简单的栗子：
 ``` javaScript
 // A
setTimeout( function(){
	// C
}, 1000 );
// B
 ```
 好了，思维在此停顿，请你用你自己的话描述上述代码的运行方式，大声说出来~ （这是原作者的要求，说是会加深你对他后面将要说的事情的理解）。

 很多读者估计是这样说的，“执行 A ，使用定时器定时 1000 毫秒，1000 毫秒后触发 C”。

 你看到上面的说法后可能会自我修正下说：“执行 A，设置一个定时器，定时 1000 毫秒，执行 B，等 1000 毫秒过后，执行C”。这里的话都是作者猜的 :)

 上面这两句话有什么不同呢？尽管第二句话可能更准确。

 其实上面两句话有个共同的不足是，这都是我们脑袋里想象出来的运行方式，它符合我们人类思考的逻辑。但是对于 JS 引擎来说，它的思考方式与我们不同，它更能理解与管理 callback 异步编程。
 
 正是因为有区别，是们不理解机器的运行方式，只用自己的方式思考，那么在以后代码的编写与维护中就会遇到问题。

 ## Sequential Brain

 很多人都幽默的说自己可以身兼数职，同时干几件事情。说说就罢，其实不太可能。

 各位读者，你同时思考两件事试试？我们的脑袋不是并发的思维模式，一次只能思考一件事情。

 就是这么个设定，我们一次只能干一件事情，即使你可能不承认。

 当然，以上观点不适用于潜意识，你在吃饭的时候潜意识控制你呼吸，这种情况你不能说你同时干了两件事情，吃饭和呼吸，因为呼吸不是我们有意识的行为控制。

 我们讨论的是你自己控制的行为，对我来说，我现在正在控制我的大脑翻译这篇文章，对于作者来说，他正在控制他的大脑编写写篇文章。不管是翻译还是编写文章，我们的大脑都没有
 做其他的事情。

 这里我想插一段话，完全的自我管理很重要！正是因为我们的大脑一次只能干一件事情，不管这件事情是翻译文章还是开小差。开小差的时候就不能翻译，翻译的时候就不能开小差。但是
 有时候我们会不自觉地开小差，这样就影响了翻译效率，浪费了时间，其实开小差这件事实在是不可取。我想真正的做一件事情的效率的提高，情绪投入很重要，比如我，枯燥的翻译实在是无聊，
 为了让翻译显得更有意思，我就有时会写一些不着边际的话，来使我感到快乐，希望各位读者理解。

 回到翻译，有时候我们表面上看起来像是做两件事，其实不是，大脑对两件事的快速转换。比如你边打字边电话聊天，当你聊天的时候，其实是大脑将打字这件事情放到了“后台”，当你电话关闭的时候，
 大脑快速的将打字带回前台，这样你又可以立刻进行打字这件事，表面上看你是边聊天，边打字，实际上不是。

 这有点像我们在第一章所提到的 js 的事件驱动机制。如果你觉得不像，请继续看一边第一章，如果还是觉得不像，请看作者原文。

 事实上，简单来说，就是那么回事。
 
 如果你想象我现在翻译的每个字，都代表一个个异步的事件（event），当我打字的时候，可能有很多另外的事件打扰我打字，比如说突如其来的手机短信。但是我从来不让这些事请打断我，短信就短信
，老子不看。要不然这篇又不知道等到何时何地才能写完了。但是事情实在太多的时候（比如说手机短信，你不看没关系，它提醒你两次），就让我有点痛苦了，这种痛苦 js 引擎也能感觉得到，它也会
遇到很多突然出现的 event。

## Doing Versus Planning

